name: Variations
description: Build variations of lovely
runs:
  using: "composite"
  steps:
    - name: Build and Push lovely
      uses: docker/build-push-action@v4
      with:
        context: .
        file: variations/Dockerfile.nover
        push: true
        platforms: ${{ env.PLATFORMS }}
        tags: ghcr.io/crumbhole/lovely:${{ github.sha }}
        build-args: VERSION=${{ github.sha }} PARENT=ghcr.io/crumbhole/argocd-lovely-plugin-cmp
    - name: Build and Push lovely-vault-ver
      uses: docker/build-push-action@v4
      with:
        context: .
        file: variations/Dockerfile.vault
        push: true
        platforms: ${{ env.PLATFORMS }}
        tags: ghcr.io/crumbhole/lovely-vault-ver:${{ github.sha }}
        build-args: VERSION=${{ github.sha }} PARENT=ghcr.io/crumbhole/argocd-lovely-plugin-cmp
    - name: Build and Push lovely-vault
      uses: docker/build-push-action@v4
      with:
        context: .
        file: variations/Dockerfile.nover
        push: true
        platforms: ${{ env.PLATFORMS }}
        tags: ghcr.io/crumbhole/lovely-vault:${{ github.sha }}
        build-args: VERSION=${{ github.sha }} PARENT=ghcr.io/crumbhole/lovely-vault-ver
    - name: Build and Push lovely-hera-ver
      uses: docker/build-push-action@v4
      with:
        context: .
        file: variations/Dockerfile.hera
        push: true
        platforms: ${{ env.PLATFORMS }}
        tags: ghcr.io/crumbhole/lovely-hera-ver:${{ github.sha }}
        build-args: VERSION=${{ github.sha }} PARENT=ghcr.io/crumbhole/argocd-lovely-plugin-cmp
    - name: Build and Push lovely-hera
      uses: docker/build-push-action@v4
      with:
        context: .
        file: variations/Dockerfile.nover
        push: true
        platforms: ${{ env.PLATFORMS }}
        tags: ghcr.io/crumbhole/lovely-hera:${{ github.sha }}
        build-args: VERSION=${{ github.sha }} PARENT=ghcr.io/crumbhole/lovely-hera-ver
    - name: Build and Push lovely-hera-vault-ver
      uses: docker/build-push-action@v4
      with:
        context: .
        file: variations/Dockerfile.vault
        push: true
        platforms: ${{ env.PLATFORMS }}
        tags: ghcr.io/crumbhole/lovely-hera-vault-ver:${{ github.sha }}
        build-args: VERSION=${{ github.sha }} PARENT=ghcr.io/crumbhole/lovely-hera-ver
    - name: Build and Push lovely-hera-vault
      uses: docker/build-push-action@v4
      with:
        context: .
        file: variations/Dockerfile.nover
        push: true
        platforms: ${{ env.PLATFORMS }}
        tags: ghcr.io/crumbhole/lovely-hera-vault:${{ github.sha }}
        build-args: VERSION=${{ github.sha }} PARENT=ghcr.io/crumbhole/lovely-hera-vault-ver
